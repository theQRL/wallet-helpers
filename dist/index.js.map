{"version":3,"file":"index.js","names":["sha256","require","sameKeys","expected","actual","length","set","Set","every","k","has","v3WalletHelpers","hexToBytes","hex","bytes","c","push","parseInt","substr","bytesToHex","i","toString","join","hashPKandformat","ePK","h","doConvert","a","qx","qm","slice","isArrayOfInts","arr","result","forEach","element","checkWeightsAndThreshold","threshold","error","sum","reduce","accumulator","currentValue","getWalletFileType","wallet","webWallet","pythonNode","convertedWebWallet","Object","keys","Array","isWalletFileDeprecated","encrypted","addressB32","pk","pythonNodeToWebWallet","output","addresses","e","normalizeWalletInput","input","JSON","parse","isV3Envelope","isArray","version","data","isLegacyV3Array","mnemonic","hexseed","address","undefined","convertWalletToV3","password","options","Error","payload","v3WalletDecrypt","walletType","v3Wallet","convertWalletToV3Async","v3WalletDecryptAsync","v3WalletAsync","module","exports","QRLAddressFromEPKHex","json","walletDataDecrypt","text","walletDataEncrypt"],"sources":["../src/index.js"],"sourcesContent":["var sha256 = require('js-sha256')\nfunction sameKeys(expected, actual) {\n  if (expected.length !== actual.length) return false\n  var set = new Set(actual)\n  return expected.every(function(k) { return set.has(k) })\n}\nvar v3WalletHelpers = require('./v3wallet')\n\nfunction hexToBytes(hex) {\n  for (var bytes = [], c = 0; c < hex.length; c += 2)\n    bytes.push(parseInt(hex.substr(c, 2), 16))\n  return bytes\n}\n\nfunction bytesToHex(bytes) {\n  for (var hex = [], i = 0; i < bytes.length; i++) {\n    hex.push((bytes[i] >>> 4).toString(16))\n    hex.push((bytes[i] & 0xf).toString(16))\n  }\n  return hex.join('')\n}\n\nfunction hashPKandformat(ePK) {\n  var h = hexToBytes(ePK)\n  return sha256(h)\n}\n\nfunction doConvert(ePK) {\n  var a = hashPKandformat(ePK)\n  var qx = sha256(hexToBytes('000400' + a))\n  var qm = qx.slice(56, 64)\n  return 'Q' + bytesToHex([0, 4, 0]) + a + qm\n}\n\nfunction isArrayOfInts(arr) {\n  var result = 0\n  arr.forEach(function(element) {\n    if (element === parseInt(element, 10)) {\n      result += 1\n    }\n  })\n  if (result === arr.length) {\n    return true\n  }\n  return false\n}\n\nfunction checkWeightsAndThreshold(arr, threshold) {\n  // check length > 0\n  if (arr.length === 0) {\n    return {\n      result: false,\n      error: 'Array has length 0'\n    }\n  }\n  // check each element in array, then threshold, is an integer\n  if (!isArrayOfInts(arr)) {\n    return {\n      result: false,\n      error: 'Array has non-integer values'\n    }\n  }\n  if (threshold !== parseInt(threshold, 10)) {\n    return {\n      result: false,\n      error: 'Threshold is not an integer'\n    }\n  }\n  // check threshold can actually be reacher\n  var sum = arr.reduce(function(accumulator, currentValue) {\n    return accumulator + currentValue\n  })\n  if (threshold > sum) {\n    return {\n      result: false,\n      error: 'Threshold can never be reached with these weights'\n    }\n  }\n  return {\n    result: true\n  }\n}\n\nfunction getWalletFileType(wallet) {\n  // determines source of wallet file\n  const webWallet = ['address', 'addressB32', 'pk', 'hexseed', 'mnemonic', 'height', 'hashFunction', 'signatureType', 'index', 'encrypted']\n  const pythonNode = ['addresses', 'encrypted', 'version']\n  const convertedWebWallet = ['pk', 'hexseed', 'mnemonic', 'height', 'hashFunction', 'signatureType', 'index', 'address', 'encrypted']\n  if (sameKeys(pythonNode, Object.keys(wallet))) {\n    return 'PYTHON-NODE'\n  }\n  if (wallet instanceof Array) {\n    if (sameKeys(webWallet, Object.keys(wallet[0]))) {\n      return 'WEB-WALLET'\n    }\n    if (sameKeys(convertedWebWallet, Object.keys(wallet[0]))) {\n      return 'CONVERTED-WEB-WALLET'\n    }\n  }\n  return 'UNKNOWN'\n}\n\nfunction isWalletFileDeprecated(wallet) {\n  if (getWalletFileType(wallet) === 'PYTHON-NODE') return true\n  // There are three characteristics that describe a deprecated encrypted wallet file\n  // 1: The encrypted field is true and\n  // 2: The addressB32 field is unencrypted and\n  // 3: The pk field is unencrypted.\n  // Whilst neither of these fields risk funds being lost, they do reveal a users public\n  // address if their wallet file is stolen. This is a privacy concern.\n  // We can determine if they are unencrypted by checking their lengths.\n  // If addressB32 field is 64 characters in length, and pk field is 134 characters in length.\n  if (\n    (typeof wallet[0].encrypted !== 'undefined') &&\n    (typeof wallet[0].addressB32 !== 'undefined') &&\n    (typeof wallet[0].pk !== 'undefined')) {\n    if (\n      (wallet[0].encrypted === true) &&\n      (wallet[0].addressB32.length === 64) &&\n      (wallet[0].pk.length === 134)) {\n      return true\n    }\n  }\n  return false\n}\n\n\nfunction pythonNodeToWebWallet(wallet) {\n  const output = []\n  wallet.addresses.forEach(element => {\n    const e = element\n    e.encrypted = wallet.encrypted\n    output.push(e)\n  })\n  return output\n}\n\nfunction normalizeWalletInput(input) {\n  if (typeof input === 'string') {\n    return JSON.parse(input)\n  }\n  return input\n}\n\nfunction isV3Envelope(wallet) {\n  return wallet\n    && typeof wallet === 'object'\n    && !Array.isArray(wallet)\n    && wallet.version === 3\n    && typeof wallet.encrypted === 'boolean'\n    && typeof wallet.data === 'string'\n}\n\nfunction isLegacyV3Array(wallet) {\n  return Array.isArray(wallet)\n    && wallet.length > 0\n    && wallet[0]\n    && wallet[0].version === 3\n    && typeof wallet[0].mnemonic === 'string'\n    && typeof wallet[0].hexseed === 'string'\n    && typeof wallet[0].address === 'string'\n    && typeof wallet[0].pk === 'string'\n    && wallet[0].data === undefined\n}\n\nfunction convertWalletToV3(input, encrypted, password, options) {\n  if (input === undefined || encrypted === undefined) {\n    throw new Error(\"Missing parameter\")\n  }\n  if (encrypted === true && password === undefined) {\n    throw new Error(\"Missing password\")\n  }\n\n  const wallet = normalizeWalletInput(input)\n  if (isV3Envelope(wallet)) {\n    return wallet\n  }\n\n  let payload = wallet\n  if (isLegacyV3Array(wallet)) {\n    payload = v3WalletHelpers.v3WalletDecrypt(wallet, password)\n  } else {\n    const walletType = getWalletFileType(wallet)\n    if (walletType === 'PYTHON-NODE') {\n      payload = pythonNodeToWebWallet(wallet)\n    } else if (walletType !== 'WEB-WALLET' && walletType !== 'CONVERTED-WEB-WALLET') {\n      throw new Error(\"Unsupported wallet format\")\n    }\n  }\n\n  return v3WalletHelpers.v3Wallet(payload, encrypted, password, options)\n}\n\nasync function convertWalletToV3Async(input, encrypted, password, options) {\n  if (input === undefined || encrypted === undefined) {\n    throw new Error(\"Missing parameter\")\n  }\n  if (encrypted === true && password === undefined) {\n    throw new Error(\"Missing password\")\n  }\n\n  const wallet = normalizeWalletInput(input)\n  if (isV3Envelope(wallet)) {\n    return wallet\n  }\n\n  let payload = wallet\n  if (isLegacyV3Array(wallet)) {\n    payload = await v3WalletHelpers.v3WalletDecryptAsync(wallet, password)\n  } else {\n    const walletType = getWalletFileType(wallet)\n    if (walletType === 'PYTHON-NODE') {\n      payload = pythonNodeToWebWallet(wallet)\n    } else if (walletType !== 'WEB-WALLET' && walletType !== 'CONVERTED-WEB-WALLET') {\n      throw new Error(\"Unsupported wallet format\")\n    }\n  }\n\n  return v3WalletHelpers.v3WalletAsync(payload, encrypted, password, options)\n}\n\nmodule.exports = {\n  /**\n   * Reports the current module version\n   * @return {string} version\n   */\n  version: function () {\n    return \"4.0.0\"\n  },\n  QRLAddressFromEPKHex: function (ePK) {\n    if (ePK === undefined) {\n      throw new Error(\"No ePK parameter\")\n    }\n    if (ePK.length !== 134) {\n      throw new Error(\"ePK length invalid\")\n    }\n    return doConvert(ePK)\n  },\n  checkWeightsAndThreshold: function (arr, threshold) {\n    if (arr === undefined || threshold === undefined) {\n      throw new Error(\"Missing parameter\")\n    }\n    return checkWeightsAndThreshold(arr, threshold)\n  },\n  isWalletFileDeprecated: function (wallet) {\n    if (wallet === undefined) {\n      throw new Error(\"Missing parameter\")\n    }\n    return isWalletFileDeprecated(wallet)\n  },\n  getWalletFileType: function (wallet) {\n    if (wallet === undefined) {\n      throw new Error(\"Missing parameter\")\n    }\n    return getWalletFileType(wallet)\n  },\n  pythonNodeToWebWallet: function (wallet) {\n    if (wallet === undefined) {\n      throw new Error(\"Missing parameter\")\n    }\n    return pythonNodeToWebWallet(wallet)\n  },\n  convertWalletToV3: function (wallet, encrypted, password, options) {\n    return convertWalletToV3(wallet, encrypted, password, options)\n  },\n  convertWalletToV3Async: function (wallet, encrypted, password, options) {\n    return convertWalletToV3Async(wallet, encrypted, password, options)\n  },\n  v3Wallet: function (json, encrypted, password, options) {\n    if (json === undefined || encrypted === undefined) {\n      throw new Error(\"Missing parameter\")\n    }\n    if (encrypted === true && password === undefined) {\n      throw new Error(\"Missing password\")\n    }\n    return v3WalletHelpers.v3Wallet(json, encrypted, password, options)\n  },\n  v3WalletAsync: function (json, encrypted, password, options) {\n    return v3WalletHelpers.v3WalletAsync(json, encrypted, password, options)\n  },\n  v3WalletDecrypt: function (input, password) {\n    return v3WalletHelpers.v3WalletDecrypt(input, password)\n  },\n  v3WalletDecryptAsync: function (input, password) {\n    return v3WalletHelpers.v3WalletDecryptAsync(input, password)\n  },\n  walletDataDecrypt: function (text, password) {\n    return v3WalletHelpers.walletDataDecrypt(text, password)\n  },\n  walletDataEncrypt: function (text, password) {\n    return v3WalletHelpers.walletDataEncrypt(text, password)\n  },\n}\n"],"mappings":"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","ignoreList":[]}